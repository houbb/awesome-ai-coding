---
title: AI SDD 开发规范-25-编码完成后的“最终裁决体系” AI_POST_EXECUTION_GATES
categories: [AI]
tags: [ai, sdd, sh]
published: true
---

# 工程级、可直接落地的《AI_POST_EXECUTION_GATES.md》标准规范文档

> **作为 AI 编码完成后的“最终裁决体系”，决定代码是否具备继续流转（合并 / 发布 / 上线）的资格。**

你可以把它当成 **AI 时代的质量门禁 + 风险控制中枢**。

---

# AI_POST_EXECUTION_GATES.md

**AI 编码事后检验与 Gate 限制规范**

> 本文档定义 **AI 生成或修改代码后**，必须依次通过的校验 Gate。
> **任何 Gate 未通过，变更必须被阻断，不得进入下一阶段。**

---

## 0. 总体原则（Global Principles）

```md
- Gate 是裁决系统，不是建议系统
- Gate 按顺序执行，不允许跳过
- Gate 失败必须显性化原因
- “勉强可接受”等价于失败
```

**适用范围：**

* 所有 AI 直接或间接参与生成的代码
* 包含 AI 修改、人类轻微调整的代码

---

## 1. Gate 总览（Gate Overview）

```text
Gate 0：AI 变更合法性 Gate（AI 特有）
Gate 1：编译 / 静态校验 Gate
Gate 2：单元 / 契约测试 Gate
Gate 3：行为回归 / QA Gate
Gate 4：性能 / 稳定性 / 风险 Gate
```

---

## 2. Gate 0 — AI 变更合法性 Gate（强制）

> **目的：验证 AI 是否“守规矩”**

### 2.1 校验目标

```md
- 是否严格遵守 AI_EXECUTION_CONTEXT_SNAPSHOT
- 是否遵守 AI_CODE_EXECUTION_RULES
- 是否存在越权、扩散或隐性修改
```

### 2.2 强制校验项

```md
- 修改文件是否在 Snapshot 授权范围内
- 是否触碰禁止目录 / 高风险模块
- 是否新增 public API / 改变接口语义
- Git Diff 是否与 AI PLAN / Intent 对齐
```

### 2.3 失败处理

```md
Gate 0 失败：
- ❌ 不允许进入 Gate 1
- ❌ 不进行代码质量讨论
- 只能：回退 / 拆分 / 重新执行
```

---

## 3. Gate 1 — 编译 / 静态校验 Gate

> **目的：验证代码在工程层面是否成立**

### 3.1 必须通过项

```md
- 构建 / 编译通过
- Lint / Format 校验通过
- 静态分析无新增严重问题
```

### 3.2 AI 特殊规则

```md
- Warning 视为 Error（对 AI Commit）
- 不允许引入新的静态分析基线
```

### 3.3 失败处理

```md
- 失败即阻断
- 不允许人工忽略
```

---

## 4. Gate 2 — 单元 / 契约测试 Gate

> **目的：验证逻辑与接口语义正确性**

### 4.1 强制要求

```md
- AI 修改或新增逻辑 → 必须有对应测试
- 关键分支 / 异常路径需覆盖
```

### 4.2 契约校验（如适用）

```md
- 对外接口返回结构未变化
- 行为与历史约定一致
```

### 4.3 失败处理

```md
- 不补测 = 不通过
- 测试 flaky 视为失败
```

---

## 5. Gate 3 — 行为回归 / QA Gate

> **目的：验证系统级行为未被破坏**

### 5.1 覆盖范围

```md
- 核心业务流程
- 历史问题高发路径
- 边界条件 / 默认行为
```

### 5.2 AI 风险关注点（必须重点检查）

```md
- 默认值变化
- 异常处理差异
- 隐性行为变化（如重试 / 超时）
```

### 5.3 裁决权

```md
- 自动化 + 人工确认
- QA / 业务负责人具备否决权
```

---

## 6. Gate 4 — 性能 / 稳定性 / 风险 Gate

> **目的：防止“功能正确但线上事故”**

### 6.1 性能校验

```md
- 延迟无明显退化
- 资源消耗无异常增长
```

### 6.2 稳定性校验

```md
- 并发 / 重试 / 熔断行为一致
- 不引入死锁 / 竞争风险
```

### 6.3 风险对齐（与 Snapshot）

```md
- 未突破 Failure Budget
- 未引入不可回滚改动
```

---

## 7. Gate 裁决权模型（Authority Model）

| Gate   | 裁决方式   |
| ------ | ------ |
| Gate 0 | 规则自动否决 |
| Gate 1 | 系统自动   |
| Gate 2 | 自动 + 人 |
| Gate 3 | 人主导    |
| Gate 4 | 技术负责人  |

---

## 8. Gate 失败后的处理策略

```md
- 明确失败 Gate
- 明确失败原因
- 明确修复路径
```

**禁止：**

```md
❌ “先合再说”
❌ “线上再观察”
```

---

## 9. AI 发布资格判定规则（Final Decision）

```text
仅当以下条件全部满足，AI 代码才具备继续流转资格：

Gate 0 ~ Gate 4 全部通过
且
无未声明风险
且
责任人与回滚方案明确
```

---

## 10. 核心裁决原则（Golden Rule）

> **AI 写的代码，只有在“被制度证明安全”之后，才算完成。**

---

## 附录：与 AI 执行体系的关系

```text
事前：AI_EXECUTION_CONTEXT_SNAPSHOT
事中：AI_CODE_EXECUTION_PROMPT + RULES
事后：AI_POST_EXECUTION_GATES
```

三者共同构成：

> **完整的 AI 软件工程治理闭环**

# 参考资料

