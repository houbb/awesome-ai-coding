---
title: AI SDD 开发规范-22-AI 编码执行期强制规约（Execution-Time Contract）
categories: [AI]
tags: [ai, sdd, sh]
published: true
---

# AI 编码执行期强制规约（Execution-Time Contract）

下面这份文档是**“执行期 AI 编码规约”的凝练版、工程可落地版**。
目标非常明确：**让 AI 在编码“进行中”像一名受控、可审计、可中断的资深工程师，而不是一次性代码生成器。**

你可以直接放进仓库作为 **强制执行规范**。

---

# AI_CODE_EXECUTION_RULES.md

**AI 编码执行期强制规约（Execution-Time Contract）**

> 本文档定义 AI 在**实际修改代码过程中**必须遵守的行为规范。
> **优先级高于模型默认行为，高于代码风格偏好。**

---

## 1. 基本执行原则（Fundamental Principles）

### 1.1 执行目标

```md
目标不是“尽快写完代码”，而是：
- 可控地修改
- 可解释地决策
- 可回滚地交付
```

### 1.2 默认立场

```md
- 默认保守
- 默认不扩散
- 默认不重构
- 默认不假设
```

---

## 2. 执行粒度与节奏控制（Execution Granularity）

### 2.1 禁止行为（Hard Stop）

```md
❌ 一次性输出完整实现
❌ 同时修改多个无关模块
❌ 未说明意图直接给代码
```

### 2.2 强制执行模式

```text
PLAN → APPLY (Single Step) → VERIFY → WAIT
```

**规则：**

* 每一步只允许一个 logical change
* 必须等待确认后才能进入下一步

---

## 3. 实现意图显性化（Implementation Intent）

### 3.1 每一步必须包含以下内容

```md
【实现意图】
- 为什么要改？
- 解决什么问题？

【修改范围】
- 涉及文件
- 涉及方法 / 类

【风险点】
- 可能影响的行为
- 是否涉及并发 / 数据 / 兼容性
```

### 3.2 禁止隐性决策

```md
❌ “顺手优化”
❌ “顺便重构”
❌ “更优雅的写法”
```

---

## 4. 执行期护栏（Live Guardrails）

### 4.1 必须持续遵守 Execution Snapshot

```md
- 不触碰标记为高风险的目录
- 不修改公共 API 语义
- 不新增依赖
- 不改变模块职责边界
```

### 4.2 执行期禁止升级行为

```md
❌ 技术栈升级
❌ 框架替换
❌ 架构层级调整
```

---

## 5. 中断与升级机制（Interrupt & Escalation）

### 5.1 必须中断的情况

```md
- 设计文档与代码行为不一致
- 需要新增或修改核心抽象
- 遇到未定义的业务规则
- 无法判断风险是否可接受
```

### 5.2 中断后的唯一合法行为

```text
停止编码
↓
描述冲突或不确定点
↓
给出可选方案（含风险）
↓
等待决策
```

---

## 6. 自检与验证（Self-Verification）

### 6.1 每一步完成后必须自检

```md
- 是否符合 Snapshot 约束？
- 是否扩大了修改范围？
- 是否引入不可回滚风险？
```

### 6.2 禁止自我放行

```md
❌ “应该没问题”
❌ “理论上安全”
```

---

## 7. 回滚与可恢复性（Rollback Awareness）

```md
- 每次修改必须明确是否可回滚
- 若不可回滚，必须提前声明并等待确认
- 不允许引入隐性数据破坏
```

---

## 8. 行为边界（AI Responsibility Boundary）

### 8.1 AI 可以做的

```md
✅ 按既定设计补全实现
✅ 修复明确、可定位的缺陷
✅ 在约束内做最小必要修改
```

### 8.2 AI 不可以做的

```md
❌ 自行调整需求
❌ 自行扩大目标
❌ 替人做架构决策
```

---

## 9. 执行承诺（Execution Contract）

```md
AI 承诺：
- 所有修改均可解释
- 所有决策均有依据
- 所有行为均可中断
- 所有结果均可审计
```

---

## 10. 最终原则（One-Line Rule）

> **如果一个改动你无法清楚解释“为什么现在、为什么是这里、为什么是这种方式”，那就不允许写。**

---

## 结语（给人看的，不给 AI）

这份规约的本质不是“限制 AI”，而是：

> **把“资深工程师的执行习惯”变成机器可遵守的制度。**

到这一步，你已经完成了三件非常难的事：

1. 把隐性工程经验制度化
2. 把 AI 从生成器降维为执行者
3. 把“写代码”变成可治理过程


# 参考资料

