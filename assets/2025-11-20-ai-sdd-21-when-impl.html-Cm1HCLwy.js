import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as n}from"./app-BiyrO2g_.js";const t={};function l(r,s){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="执行阶段" tabindex="-1"><a class="header-anchor" href="#执行阶段"><span>执行阶段</span></a></h1><p>你已经把<strong>执行前</strong>（Context Freeze）做到接近极致了，但现实是：</p><blockquote><p><strong>再完美的上下文，如果执行阶段不受控，AI 仍然会“写着写着就跑偏”。</strong></p></blockquote><p>所以我们现在讨论的已经不是“理解问题”，而是：</p><blockquote><p><strong>如何在编码“进行中”，持续约束 AI 的行为方式、节奏与决策粒度。</strong></p></blockquote><p>下面我会给你一个<strong>工程化、可落地的答案</strong>，不是理念。</p><hr><h1 id="一句话结论-先给结论" tabindex="-1"><a class="header-anchor" href="#一句话结论-先给结论"><span>一句话结论（先给结论）</span></a></h1><blockquote><p><strong>执行期的核心不是“继续给信息”，而是：<br> 把“写代码”拆解成一组可中断、可校验、可回滚的受控动作。</strong></p></blockquote><p>也就是说：<br><strong>把 AI 从“一次性代码生成器”，变成“受控执行的工程协作者”。</strong></p><hr><h2 id="一、执行期的三大失控来源-必须先认清" tabindex="-1"><a class="header-anchor" href="#一、执行期的三大失控来源-必须先认清"><span>一、执行期的三大失控来源（必须先认清）</span></a></h2><p>在编码阶段，AI 失控通常来自三点：</p><ol><li><strong>执行粒度过大</strong>（一次改太多）</li><li><strong>隐性决策不可见</strong>（为什么这么写你不知道）</li><li><strong>没有“停下来检查”的机制</strong></li></ol><p>执行期的治理，本质上就是解决这三点。</p><hr><h2 id="二、执行期治理的四个核心机制-重点" tabindex="-1"><a class="header-anchor" href="#二、执行期治理的四个核心机制-重点"><span>二、执行期治理的四个核心机制（重点）</span></a></h2><hr><h2 id="_1️⃣-编码节奏控制-step-by-step-execution" tabindex="-1"><a class="header-anchor" href="#_1️⃣-编码节奏控制-step-by-step-execution"><span>1️⃣ 编码节奏控制：Step-by-Step Execution</span></a></h2><blockquote><p><strong>禁止“直接写最终代码”</strong></p></blockquote><h3 id="强制执行模型" tabindex="-1"><a class="header-anchor" href="#强制执行模型"><span>强制执行模型</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>Plan → Diff → Check → Apply</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="执行规则-给-ai-的硬约束" tabindex="-1"><a class="header-anchor" href="#执行规则-给-ai-的硬约束"><span>执行规则（给 AI 的硬约束）</span></a></h4><ul><li><p>每一步只做 <strong>一个最小可验证修改</strong></p></li><li><p>每一步必须说明：</p><ul><li>修改动机</li><li>修改范围</li><li>风险点</li></ul></li></ul><h4 id="示例执行指令" tabindex="-1"><a class="header-anchor" href="#示例执行指令"><span>示例执行指令</span></a></h4><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">【执行约束】</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不允许一次性输出完整实现</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 每一步仅提交一个 logical change</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 等待确认后再继续下一步</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>这是在<strong>模拟人类资深工程师的工作节奏</strong>。</p></blockquote><hr><h2 id="_2️⃣-显性化-实现意图-implementation-intent" tabindex="-1"><a class="header-anchor" href="#_2️⃣-显性化-实现意图-implementation-intent"><span>2️⃣ 显性化“实现意图”（Implementation Intent）</span></a></h2><blockquote><p><strong>不允许“默默做决定”</strong></p></blockquote><h3 id="每一段代码必须绑定-意图说明" tabindex="-1"><a class="header-anchor" href="#每一段代码必须绑定-意图说明"><span>每一段代码必须绑定“意图说明”</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## Step 2 – 修改缓存失效逻辑</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">意图：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 保证与旧行为完全一致</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 仅修复并发下的 NPE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">涉及文件：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CacheService.java</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">潜在风险：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 线程安全</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果 AI 无法清晰表达意图：</p><blockquote><p><strong>说明它并没有真的理解这一改动</strong></p></blockquote><hr><h2 id="_3️⃣-执行期实时护栏-live-guardrails" tabindex="-1"><a class="header-anchor" href="#_3️⃣-执行期实时护栏-live-guardrails"><span>3️⃣ 执行期实时护栏（Live Guardrails）</span></a></h2><blockquote><p><strong>把执行前的 Snapshot 变成“实时约束器”</strong></p></blockquote><h3 id="示例执行期护栏-prompt" tabindex="-1"><a class="header-anchor" href="#示例执行期护栏-prompt"><span>示例执行期护栏 Prompt</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">执行中强制约束：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不修改 SNAPSHOT 中标记为“高风险”的目录</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不引入新的公共 API</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不新增第三方依赖</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不扩大方法职责</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>关键点</strong>：<br> 护栏不是一次性的，而是<strong>每一步都重复注入</strong>。</p><hr><h2 id="_4️⃣-中断与升级机制-interrupt-escalation" tabindex="-1"><a class="header-anchor" href="#_4️⃣-中断与升级机制-interrupt-escalation"><span>4️⃣ 中断与升级机制（Interrupt &amp; Escalation）</span></a></h2><blockquote><p><strong>允许 AI “停下来求救”，而不是“硬写”</strong></p></blockquote><h3 id="触发中断的标准-必须显式定义" tabindex="-1"><a class="header-anchor" href="#触发中断的标准-必须显式定义"><span>触发中断的标准（必须显式定义）</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">当出现以下任一情况，必须中断执行：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 设计文档与代码现状不一致</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 遇到未覆盖的业务分支</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 需要做结构性决策</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>中断后的唯一合法行为：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>停止编码 → 描述问题 → 提出选项 → 等待决策</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="三、把-执行期-结构化成一个状态机" tabindex="-1"><a class="header-anchor" href="#三、把-执行期-结构化成一个状态机"><span>三、把“执行期”结构化成一个状态机</span></a></h2><p>这是一个非常重要的认知升级。</p><h3 id="ai-编码状态机-execution-fsm" tabindex="-1"><a class="header-anchor" href="#ai-编码状态机-execution-fsm"><span>AI 编码状态机（Execution FSM）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>INIT</span></span>
<span class="line"><span> ↓</span></span>
<span class="line"><span>PLAN（计划）</span></span>
<span class="line"><span> ↓</span></span>
<span class="line"><span>APPLY_STEP（最小变更）</span></span>
<span class="line"><span> ↓</span></span>
<span class="line"><span>VERIFY（自检）</span></span>
<span class="line"><span> ↓</span></span>
<span class="line"><span>REVIEW_GATE（人工/规则）</span></span>
<span class="line"><span> ↓</span></span>
<span class="line"><span>NEXT_STEP / HALT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>AI 不再是“生成器”，而是“执行状态机”。</strong></p></blockquote><hr><h2 id="四、最小可用的《ai-编码执行规范》" tabindex="-1"><a class="header-anchor" href="#四、最小可用的《ai-编码执行规范》"><span>四、最小可用的《AI 编码执行规范》</span></a></h2><p>你可以直接在项目中放一个：</p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">AI_EXECUTION_RULES.md</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>核心内容：</p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 禁止一次性大规模修改</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 每次修改必须说明意图</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 每次修改必须可回滚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不确定即中断</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 默认保守</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="五、为什么这套东西有效" tabindex="-1"><a class="header-anchor" href="#五、为什么这套东西有效"><span>五、为什么这套东西有效？</span></a></h2><p>因为它解决了 AI 编码的<strong>根因问题</strong>：</p><table><thead><tr><th>问题</th><th>传统 AI</th><th>你的体系</th></tr></thead><tbody><tr><td>改动不可控</td><td>一次性生成</td><td>拆解为可审计步骤</td></tr><tr><td>风险不可见</td><td>隐性决策</td><td>显性意图 + 风险</td></tr><tr><td>错误发现太晚</td><td>写完才看</td><td>每一步校验</td></tr></tbody></table><hr><h2 id="六、一个非常重要的判断" tabindex="-1"><a class="header-anchor" href="#六、一个非常重要的判断"><span>六、一个非常重要的判断</span></a></h2><blockquote><p><strong>执行期治理，才是 AI 编码真正的“护城河”。</strong></p></blockquote><p>模型会越来越强<br> 上下文会越来越大<br><strong>但“如何写”永远需要工程约束</strong></p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1>`,68)])])}const d=i(t,[["render",l]]),o=JSON.parse('{"path":"/posts/sdd/2025-11-20-ai-sdd-21-when-impl.html","title":"AI SDD 开发规范-21-AI 如何更好的实现代码？","lang":"zh-CN","frontmatter":{"title":"AI SDD 开发规范-21-AI 如何更好的实现代码？","categories":["AI"],"tags":["ai","sdd","sh"],"published":true,"description":"执行阶段 你已经把执行前（Context Freeze）做到接近极致了，但现实是： 再完美的上下文，如果执行阶段不受控，AI 仍然会“写着写着就跑偏”。 所以我们现在讨论的已经不是“理解问题”，而是： 如何在编码“进行中”，持续约束 AI 的行为方式、节奏与决策粒度。 下面我会给你一个工程化、可落地的答案，不是理念。 一句话结论（先给结论） 执行期的核...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AI SDD 开发规范-21-AI 如何更好的实现代码？\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-27T07:02:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://houbb.github.io/awesome-ai-coding/posts/sdd/2025-11-20-ai-sdd-21-when-impl.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"AI SDD 开发规范-21-AI 如何更好的实现代码？"}],["meta",{"property":"og:description","content":"执行阶段 你已经把执行前（Context Freeze）做到接近极致了，但现实是： 再完美的上下文，如果执行阶段不受控，AI 仍然会“写着写着就跑偏”。 所以我们现在讨论的已经不是“理解问题”，而是： 如何在编码“进行中”，持续约束 AI 的行为方式、节奏与决策粒度。 下面我会给你一个工程化、可落地的答案，不是理念。 一句话结论（先给结论） 执行期的核..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-27T07:02:53.000Z"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:tag","content":"sdd"}],["meta",{"property":"article:tag","content":"ai"}],["meta",{"property":"article:modified_time","content":"2025-12-27T07:02:53.000Z"}]]},"git":{"createdTime":1766818973000,"updatedTime":1766818973000,"contributors":[{"name":"bbhou","username":"bbhou","email":"1557740299@qq.com","commits":1,"url":"https://github.com/bbhou"}]},"readingTime":{"minutes":3.46,"words":1038},"filePathRelative":"posts/sdd/2025-11-20-ai-sdd-21-when-impl.md","excerpt":"\\n<p>你已经把<strong>执行前</strong>（Context Freeze）做到接近极致了，但现实是：</p>\\n<blockquote>\\n<p><strong>再完美的上下文，如果执行阶段不受控，AI 仍然会“写着写着就跑偏”。</strong></p>\\n</blockquote>\\n<p>所以我们现在讨论的已经不是“理解问题”，而是：</p>\\n<blockquote>\\n<p><strong>如何在编码“进行中”，持续约束 AI 的行为方式、节奏与决策粒度。</strong></p>\\n</blockquote>\\n<p>下面我会给你一个<strong>工程化、可落地的答案</strong>，不是理念。</p>","autoDesc":true}');export{d as comp,o as data};
