import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a,o as n}from"./app-CMaZGEzo.js";const l={};function r(t,s){return n(),e("div",null,[...s[0]||(s[0]=[a(`<h1 id="如何让-ai-更好的-仓库感知-repository-awareness" tabindex="-1"><a class="header-anchor" href="#如何让-ai-更好的-仓库感知-repository-awareness"><span>如何让 ai 更好的 仓库感知（Repository Awareness）</span></a></h1><p>这是一个<strong>已经进入“AI 编程系统工程”层级的问题</strong>。<br> 你问的不是“怎么多喂点上下文”，而是：</p><blockquote><p><strong>如何让 AI 像一个在仓库里工作了 1–2 年的工程师，而不是一个临时读了几个文件的外包。</strong></p></blockquote><p>下面我给你一套<strong>可分阶段落地的 Repository Awareness 体系</strong>，并且会明确区分：<br><strong>哪些是“立刻可做的”，哪些是“需要平台化能力的”。</strong></p><hr><h2 id="一、先澄清一个关键误区" tabindex="-1"><a class="header-anchor" href="#一、先澄清一个关键误区"><span>一、先澄清一个关键误区</span></a></h2><p><strong>仓库感知 ≠ 上下文长度</strong></p><p>很多人以为：</p><ul><li>上下文窗口更大</li><li>多喂 README / tree</li></ul><p>AI 就“理解仓库”了。</p><p>这是错误的。</p><blockquote><p><strong>仓库感知的本质是：AI 是否理解“这个仓库为什么长成这样”。</strong></p></blockquote><hr><h2 id="二、repository-awareness-的-5-个层级-成熟度模型" tabindex="-1"><a class="header-anchor" href="#二、repository-awareness-的-5-个层级-成熟度模型"><span>二、Repository Awareness 的 5 个层级（成熟度模型）</span></a></h2><p>你可以把它当作一个<strong>能力演进路线图</strong>。</p><hr><h3 id="level-0-文件级感知-大多数-ai-目前状态" tabindex="-1"><a class="header-anchor" href="#level-0-文件级感知-大多数-ai-目前状态"><span>Level 0：文件级感知（大多数 AI 目前状态）</span></a></h3><p>AI 能：</p><ul><li>看单个文件</li><li>理解局部代码</li></ul><p>AI 不知道：</p><ul><li>这个文件在系统中的角色</li><li>为什么不能改</li></ul><p>❌ 只能做“局部补丁”</p><hr><h3 id="level-1-结构级感知-基础但必要" tabindex="-1"><a class="header-anchor" href="#level-1-结构级感知-基础但必要"><span>Level 1：结构级感知（基础但必要）</span></a></h3><p>AI 知道：</p><ul><li>模块边界</li><li>分层结构</li><li>哪些是公共模块</li></ul><h4 id="最小可用手段-立刻可做" tabindex="-1"><a class="header-anchor" href="#最小可用手段-立刻可做"><span>最小可用手段（立刻可做）</span></a></h4><p><strong>1️⃣ 仓库结构说明文件</strong></p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">REPO_STRUCTURE.md</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> api/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 对外接口层，禁止直接访问 DB</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> service/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 核心业务逻辑</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> infra/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 技术实现细节</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2️⃣ Prompt 强制要求</strong></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>在修改任何代码前，先解释该文件在仓库中的角色。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="level-2-意图级感知-你已经在做" tabindex="-1"><a class="header-anchor" href="#level-2-意图级感知-你已经在做"><span>Level 2：意图级感知（你已经在做）</span></a></h3><p>AI 理解：</p><ul><li>项目做什么</li><li>当前阶段目标是什么</li><li>为什么不做某些“正确的事”</li></ul><h4 id="核心文件组合" tabindex="-1"><a class="header-anchor" href="#核心文件组合"><span>核心文件组合</span></a></h4><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>PROJECT_PROFILE.md   → 为什么存在</span></span>
<span class="line"><span>DESIGN.md            → 这次要干什么</span></span>
<span class="line"><span>NON_GOALS.md         → 明确不干什么</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>这是从“代码理解”跃迁到“系统理解”的分水岭</strong></p></blockquote><hr><h3 id="level-3-历史与约束感知-关键跃迁" tabindex="-1"><a class="header-anchor" href="#level-3-历史与约束感知-关键跃迁"><span>Level 3：历史与约束感知（关键跃迁）</span></a></h3><p>这是 AI 编程<strong>最容易出事故、也最有价值的一层</strong>。</p><p>AI 需要知道：</p><ul><li>哪些地方“看起来很烂但不能改”</li><li>哪些坑已经踩过</li></ul><h4 id="你已经有雏形-但可以进一步系统化" tabindex="-1"><a class="header-anchor" href="#你已经有雏形-但可以进一步系统化"><span>你已经有雏形，但可以进一步系统化</span></a></h4><p><strong>1️⃣ 历史包袱显性化</strong></p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">HISTORICAL_DECISIONS.md</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 为什么 auth 模块没重构</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 为什么 DTO 字段命名不统一</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2️⃣ TACIT_KNOWLEDGE.md</strong><br> （你刚刚已经有完整模板）</p><hr><h3 id="level-4-行为级感知-ai-开始-自我约束" tabindex="-1"><a class="header-anchor" href="#level-4-行为级感知-ai-开始-自我约束"><span>Level 4：行为级感知（AI 开始“自我约束”）</span></a></h3><p>这一层的标志是：</p><blockquote><p><strong>AI 在你没提醒的情况下，会主动避开危险修改。</strong></p></blockquote><p>实现手段不是“更聪明的模型”，而是<strong>流程设计</strong>。</p><h4 id="关键机制" tabindex="-1"><a class="header-anchor" href="#关键机制"><span>关键机制</span></a></h4><p><strong>1️⃣ 改代码前强制 Scan</strong></p><p>你已经有了：</p><ul><li>风险扫描 Checklist</li><li>澄清触发器</li></ul><p><strong>2️⃣ AI 被允许拒绝执行</strong></p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>如果你无法确认仓库级影响，请拒绝修改并解释原因。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="level-5-演化级感知-平台级能力" tabindex="-1"><a class="header-anchor" href="#level-5-演化级感知-平台级能力"><span>Level 5：演化级感知（平台级能力）</span></a></h3><p>这是<strong>少数团队才会做到的层级</strong>。</p><p>AI 知道：</p><ul><li>仓库在“变好”还是“变坏”</li><li>当前是探索期 / 收敛期 / 维护期</li></ul><h4 id="典型能力-需要平台" tabindex="-1"><a class="header-anchor" href="#典型能力-需要平台"><span>典型能力（需要平台）</span></a></h4><ul><li>变更趋势分析</li><li>技术债密度感知</li><li>模块“脆弱度”评分</li><li>历史回滚关联分析</li></ul><hr><h2 id="三、立刻可落地的-7-个仓库感知增强手段" tabindex="-1"><a class="header-anchor" href="#三、立刻可落地的-7-个仓库感知增强手段"><span>三、立刻可落地的 7 个仓库感知增强手段</span></a></h2><p>下面是<strong>不需要平台、你现在就能用的</strong>。</p><hr><h3 id="_1️⃣-明确-仓库导览入口文件" tabindex="-1"><a class="header-anchor" href="#_1️⃣-明确-仓库导览入口文件"><span>1️⃣ 明确“仓库导览入口文件”</span></a></h3><p>建议固定一个：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>REPO_GUIDE.md</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>内容只回答 3 个问题：</p><ul><li>这个仓库是干什么的</li><li>哪些地方危险</li><li>修改流程是什么</li></ul><hr><h3 id="_2️⃣-强制-ai-先-复述理解" tabindex="-1"><a class="header-anchor" href="#_2️⃣-强制-ai-先-复述理解"><span>2️⃣ 强制 AI 先“复述理解”</span></a></h3><p>这是极其有效、成本极低的技巧。</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>在开始修改前，请先用不超过 200 字描述：</span></span>
<span class="line"><span>- 该仓库的整体结构</span></span>
<span class="line"><span>- 本次修改涉及的模块角色</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>复述错误 = 感知失败</strong></p><hr><h3 id="_3️⃣-目录级-readme-比根-readme-更重要" tabindex="-1"><a class="header-anchor" href="#_3️⃣-目录级-readme-比根-readme-更重要"><span>3️⃣ 目录级 README（比根 README 更重要）</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>service/README.md</span></span>
<span class="line"><span>infra/README.md</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>说明：</p><ul><li>允许做什么</li><li>不允许做什么</li></ul><hr><h3 id="_4️⃣-冻结区-语义标记" tabindex="-1"><a class="header-anchor" href="#_4️⃣-冻结区-语义标记"><span>4️⃣ 冻结区 + 语义标记</span></a></h3><p>不仅写在文档里，还体现在结构上：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>legacy/</span></span>
<span class="line"><span>_do_not_touch/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>AI 对“结构信号”极其敏感。</p><hr><h3 id="_5️⃣-为什么存在-注释-不是-怎么用" tabindex="-1"><a class="header-anchor" href="#_5️⃣-为什么存在-注释-不是-怎么用"><span>5️⃣ “为什么存在”注释（不是“怎么用”）</span></a></h3><p>坏注释：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 校验参数</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>好注释：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 保留此校验是为兼容 2019 年老客户端，禁止移除</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h3 id="_6️⃣-改代码前强制列影响面" tabindex="-1"><a class="header-anchor" href="#_6️⃣-改代码前强制列影响面"><span>6️⃣ 改代码前强制列影响面</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>在输出代码前，先列出：</span></span>
<span class="line"><span>- 直接影响模块</span></span>
<span class="line"><span>- 间接影响模块</span></span>
<span class="line"><span>- 不确定影响</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_7️⃣-把-禁止事项-写成第一等公民" tabindex="-1"><a class="header-anchor" href="#_7️⃣-把-禁止事项-写成第一等公民"><span>7️⃣ 把“禁止事项”写成第一等公民</span></a></h3><p><strong>禁止 &gt; 建议</strong></p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## 禁止事项</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不得重构 XXX</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不得统一异常处理</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="四、一个你可能没意识到的重要点" tabindex="-1"><a class="header-anchor" href="#四、一个你可能没意识到的重要点"><span>四、一个你可能没意识到的重要点</span></a></h2><blockquote><p><strong>仓库感知不是一次性“理解”，而是持续校准。</strong></p></blockquote><p>真正有效的做法是：</p><ul><li>每次事故</li><li>每次回滚</li><li>每次“AI 差点改炸了”</li></ul><p>都反向补充到：</p><ul><li>TACIT_KNOWLEDGE</li><li>REPO_GUIDE</li><li>风险规则</li></ul><hr><h2 id="五、最终工程结论" tabindex="-1"><a class="header-anchor" href="#五、最终工程结论"><span>五、最终工程结论</span></a></h2><p>如果我要给你一句<strong>非常工程化的总结</strong>：</p><blockquote><p><strong>不要让 AI 去“理解仓库”，而是让仓库“主动告诉 AI 该怎么尊重它”。</strong></p></blockquote><p>你现在已经具备：</p><ul><li>设计约束</li><li>隐性知识显性化</li><li>风险前置</li><li>行为门禁</li></ul><p>这已经超过 90% 的 AI 编程实践。</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1>`,117)])])}const p=i(l,[["render",r]]),o=JSON.parse('{"path":"/posts/sdd/2025-11-20-ai-sdd-13-repo-aware.html","title":"AI SDD 开发规范-13-仓库感知（Repository Awareness）","lang":"zh-CN","frontmatter":{"title":"AI SDD 开发规范-13-仓库感知（Repository Awareness）","categories":["AI"],"tags":["ai","sdd","sh"],"published":true,"description":"如何让 ai 更好的 仓库感知（Repository Awareness） 这是一个已经进入“AI 编程系统工程”层级的问题。 你问的不是“怎么多喂点上下文”，而是： 如何让 AI 像一个在仓库里工作了 1–2 年的工程师，而不是一个临时读了几个文件的外包。 下面我给你一套可分阶段落地的 Repository Awareness 体系，并且会明确区分：...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AI SDD 开发规范-13-仓库感知（Repository Awareness）\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-27T07:02:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://houbb.github.io/awesome-ai-coding/posts/sdd/2025-11-20-ai-sdd-13-repo-aware.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"AI SDD 开发规范-13-仓库感知（Repository Awareness）"}],["meta",{"property":"og:description","content":"如何让 ai 更好的 仓库感知（Repository Awareness） 这是一个已经进入“AI 编程系统工程”层级的问题。 你问的不是“怎么多喂点上下文”，而是： 如何让 AI 像一个在仓库里工作了 1–2 年的工程师，而不是一个临时读了几个文件的外包。 下面我给你一套可分阶段落地的 Repository Awareness 体系，并且会明确区分：..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-27T07:02:53.000Z"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:tag","content":"sdd"}],["meta",{"property":"article:tag","content":"ai"}],["meta",{"property":"article:modified_time","content":"2025-12-27T07:02:53.000Z"}]]},"git":{"createdTime":1766818973000,"updatedTime":1766818973000,"contributors":[{"name":"bbhou","username":"bbhou","email":"1557740299@qq.com","commits":1,"url":"https://github.com/bbhou"}]},"readingTime":{"minutes":4.33,"words":1300},"filePathRelative":"posts/sdd/2025-11-20-ai-sdd-13-repo-aware.md","excerpt":"\\n<p>这是一个<strong>已经进入“AI 编程系统工程”层级的问题</strong>。<br>\\n你问的不是“怎么多喂点上下文”，而是：</p>\\n<blockquote>\\n<p><strong>如何让 AI 像一个在仓库里工作了 1–2 年的工程师，而不是一个临时读了几个文件的外包。</strong></p>\\n</blockquote>\\n<p>下面我给你一套<strong>可分阶段落地的 Repository Awareness 体系</strong>，并且会明确区分：<br>\\n<strong>哪些是“立刻可做的”，哪些是“需要平台化能力的”。</strong></p>\\n<hr>\\n<h2>一、先澄清一个关键误区</h2>","autoDesc":true}');export{p as comp,o as data};
