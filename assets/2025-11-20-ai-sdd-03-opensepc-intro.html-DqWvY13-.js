import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a as n,o as a}from"./app-BwCJKuNN.js";const p={};function l(d,e){return a(),i("div",null,[...e[0]||(e[0]=[n(`<h1 id="openspec" tabindex="-1"><a class="header-anchor" href="#openspec"><span>OpenSpec</span></a></h1><p>OpenSpec 让人类和 AI 编码助手之间达成「规格驱动开发」（spec-driven development），确保在写任何代码之前，大家都同意要构建什么。<strong>不需要 API 密钥</strong>。</p><hr><h2 id="为什么要用-openspec" tabindex="-1"><a class="header-anchor" href="#为什么要用-openspec"><span>为什么要用 OpenSpec？</span></a></h2><ul><li><p>虽然 AI 编码助手很强大，但当需求散落在聊天记录里时，它们极不稳定。</p></li><li><p>OpenSpec 引入一种轻量级的规格工作流程，把意图锁定下来，然后再去实现。这样可以得到 <strong>确定性（deterministic）</strong>、<strong>可复审（reviewable）</strong> 的输出。</p></li><li><p>关键收益包括：</p><ol><li>人类和 AI 的参与者在工作开始之前就对规格达成一致。</li><li>通过结构化的变更文件夹（proposal 提案、tasks 任务、spec 更新），让范围明确且可审计。</li><li>对「正在提议」「正在进行」「已归档」的变更，都有共享可见性。</li><li>与你已经使用的 AI 工具兼容 — 在支持的工具里可以用自定义斜杠命令（slash commands），在其他地方则可以通过上下文规则（context rules）工作。</li></ol></li></ul><hr><h2 id="openspec-与其他工具对比-简览" tabindex="-1"><a class="header-anchor" href="#openspec-与其他工具对比-简览"><span>OpenSpec 与其他工具对比（简览）</span></a></h2><ul><li><p><strong>轻量</strong>：工作流程简单，不用 API key，设置成本低。</p></li><li><p><strong>支持已有项目（褐地／brownfield优先）</strong>：专为“已有代码基础”设计。OpenSpec 把「真实规范」和「提案规范」分离： <code>openspec/specs/</code> 是当前真相，<code>openspec/changes/</code> 是提议变更。这样 diff（差异）清晰、可控。</p></li><li><p><strong>变更追踪</strong>：提案（proposal）、任务（tasks）和规格差异（spec deltas）在一个地方管理；归档（archive）后，把被批准的变更合并回当前规范。</p></li><li><p><strong>与 spec-kit / Kiro 的对比</strong>：</p><ul><li>spec-kit 和 Kiro 非常适合从零开始（0→1）功能开发。</li><li>OpenSpec 在修改已有功能（1→n）时表现更好，尤其是当一个变更涉及多个规范时。</li></ul></li></ul><hr><h2 id="openspec-的工作流程" tabindex="-1"><a class="header-anchor" href="#openspec-的工作流程"><span>OpenSpec 的工作流程</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>┌────────────────────┐</span></span>
<span class="line"><span>│ Draft Change       │</span></span>
<span class="line"><span>│ Proposal           │</span></span>
<span class="line"><span>└────────┬───────────┘</span></span>
<span class="line"><span>         │ 与 AI 分享你的意图</span></span>
<span class="line"><span>         ▼</span></span>
<span class="line"><span>┌────────────────────┐</span></span>
<span class="line"><span>│ Review &amp; Align     │</span></span>
<span class="line"><span>│（编辑 spec 和 tasks）  │◀── 反馈循环 ────┐</span></span>
<span class="line"><span>└────────┬───────────┘                  │</span></span>
<span class="line"><span>         │ 批准后的计划                     │</span></span>
<span class="line"><span>         ▼                                  │</span></span>
<span class="line"><span>┌────────────────────┐                      │</span></span>
<span class="line"><span>│ Implement Tasks    │──────────────────────┘</span></span>
<span class="line"><span>│（AI 写代码）         │</span></span>
<span class="line"><span>└────────┬───────────┘</span></span>
<span class="line"><span>         │ 提交变更</span></span>
<span class="line"><span>         ▼</span></span>
<span class="line"><span>┌────────────────────┐</span></span>
<span class="line"><span>│ Archive &amp; Update   │</span></span>
<span class="line"><span>│ Specs（真实规范）   │</span></span>
<span class="line"><span>└────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>具体步骤：</p><ol><li>草拟一个变更提案（proposal），描述你想要修改或新增什么规范。</li><li>和你的 AI 助手一起复审这个提案，直到大家达成一致。</li><li>实现与规格相对应的任务（tasks）。</li><li>归档这个变更：把经过确认的规格更改合并回 <code>openspec/specs/</code>，成为新的真实规范。</li></ol><hr><h2 id="快速上手-getting-started" tabindex="-1"><a class="header-anchor" href="#快速上手-getting-started"><span>快速上手（Getting Started）</span></a></h2><h3 id="支持的-ai-工具" tabindex="-1"><a class="header-anchor" href="#支持的-ai-工具"><span>支持的 AI 工具</span></a></h3><p><strong>原生 Slash 命令支持的工具</strong>（也就是可以直接用 <code>/openspec:proposal</code> 之类命令）：</p><table><thead><tr><th>工具</th><th>支持命令</th></tr></thead><tbody><tr><td>Claude Code</td><td><code>/openspec:proposal</code>、<code>/openspec:apply</code>、<code>/openspec:archive</code></td></tr><tr><td>CodeBuddy（CLI）</td><td><code>/openspec:proposal</code>、<code>/openspec:apply</code>、<code>/openspec:archive</code>（在 <code>.codebuddy/commands/</code> 里）</td></tr><tr><td>CoStrict</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.cospec/openspec/commands/</code>）</td></tr><tr><td>Cursor</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code></td></tr><tr><td>Cline</td><td><code>.clinerules/workflows/openspec-*.md</code> 中有对应工作流</td></tr><tr><td>Crush</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.crush/commands/openspec/</code> 里）</td></tr><tr><td>RooCode</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.roo/commands/</code>）</td></tr><tr><td>Factory Droid</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.factory/commands/</code>）</td></tr><tr><td>Gemini CLI</td><td><code>/openspec:proposal</code>、<code>/openspec:apply</code>、<code>/openspec:archive</code>（在 <code>.gemini/commands/openspec/</code>）</td></tr><tr><td>OpenCode</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code></td></tr><tr><td>Kilo Code</td><td><code>/openspec-proposal.md</code>、<code>/openspec-apply.md</code>、<code>/openspec-archive.md</code>（在 <code>.kilocode/workflows/</code>）</td></tr><tr><td>Qoder (CLI)</td><td><code>/openspec:proposal</code>、<code>/openspec:apply</code>、<code>/openspec:archive</code>（在 <code>.qoder/commands/openspec/</code>）</td></tr><tr><td>Antigravity</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.agent/workflows/</code>）</td></tr><tr><td>Windsurf</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.windsurf/workflows/</code>）</td></tr><tr><td>Codex</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（全局在 <code>~/.codex/prompts</code>，会自动安装）</td></tr><tr><td>GitHub Copilot</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.github/prompts/</code>）</td></tr><tr><td>Amazon Q Developer</td><td><code>@openspec-proposal</code>、<code>@openspec-apply</code>、<code>@openspec-archive</code>（在 <code>.amazonq/prompts/</code>）</td></tr><tr><td>Auggie (Augment CLI)</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.augment/commands/</code>）</td></tr><tr><td>Qwen Code</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.qwen/commands/</code>）</td></tr><tr><td>iFlow (iflow-cli)</td><td><code>/openspec-proposal</code>、<code>/openspec-apply</code>、<code>/openspec-archive</code>（在 <code>.iflow/commands/</code>）</td></tr></tbody></table><p><strong><a href="http://AGENTS.md" target="_blank" rel="noopener noreferrer">AGENTS.md</a> 兼容工具</strong>：</p><ul><li>有些工具遵循 <code>openspec/AGENTS.md</code> 约定。</li><li>如果你的 AI 助手支持从 <code>AGENTS.md</code> 读取工作流指令，就可以让它遵循 OpenSpec 流程。</li><li>OpenSpec 就是借助这个通用约定，让更多工具能工作。</li></ul><hr><h3 id="安装-初始化" tabindex="-1"><a class="header-anchor" href="#安装-初始化"><span>安装 &amp; 初始化</span></a></h3><ol><li><p><strong>前置条件</strong></p><ul><li>需要 Node.js，版本 <strong>&gt;= 20.19.0</strong>。可以通过 <code>node --version</code> 检查。</li></ul></li><li><p><strong>全局安装 CLI</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> @fission-ai/openspec@latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装完成后，验证：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">openspec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --version</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>在你的项目里初始化 OpenSpec</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> my-project</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 进入你的项目目录  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">openspec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> init</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 运行初始化</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>初始化时会发生：</p><ul><li>提示让你选择一个或多个原生支持 OpenSpec 的 AI 工具（如 Claude Code、Cursor、OpenCode、Qoder 等）</li><li>自动为你配置斜杠命令（slash command）</li><li>在项目根目录生成 <code>AGENTS.md</code>（这是 OpenSpec 的工作流指导文件）</li><li>创建 <code>openspec/</code> 目录结构（包括 <code>specs/</code>、<code>changes/</code> 等）</li></ul></li></ol><p>完成之后：</p><ul><li>选定的 AI 工具可以触发 <code>/openspec</code> 工作流命令。</li><li>你可以执行 <code>openspec list</code> 来查看当前有哪些变更在进行中。</li><li>如果你的 AI 助手暂时没显示新命令（slash commands），可以重启它（很多助手在启动时加载命令）。</li></ul><hr><h3 id="可选-初始化后填项目上下文" tabindex="-1"><a class="header-anchor" href="#可选-初始化后填项目上下文"><span>（可选）初始化后填项目上下文</span></a></h3><p>初始化完成后，OpenSpec 会建议一个 prompt，让你用它来填充项目上下文：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>“请阅读 openspec/project.md，并帮我用我的项目技术栈、约定、架构风格等信息填充它”</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>openspec/project.md</code> 是一个用来定义整个项目级别约定的地方，比如：</p><ul><li>代码约定（命名规则、目录结构）</li><li>架构风格</li><li>技术栈</li><li>团队工作流程</li></ul><p>这些是 OpenSpec 用来指导后续变更提案 / 实现的重要基础。</p><hr><h2 id="创建你的第一个变更-change" tabindex="-1"><a class="header-anchor" href="#创建你的第一个变更-change"><span>创建你的第一个变更（Change）</span></a></h2><p>下面是一个用任何 AI 工具都能跑通的完整示例流程（对于原生支持 Slash Command 的工具，还可以简化）：</p><ol><li><p><strong>草拟提案（Proposal）</strong><br> 你对 AI 说：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>创建一个 OpenSpec 变更提案（change proposal），用于 “根据角色和团队过滤资料搜索” 的功能。</span></span>
<span class="line"><span>（如果你的工具支持 Slash Command，可以直接： \`/openspec:proposal Add profile search filters\`）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后 AI 会生成目录结构，比如：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>openspec/changes/add-profile-filters/</span></span>
<span class="line"><span>  ├── proposal.md</span></span>
<span class="line"><span>  ├── tasks.md</span></span>
<span class="line"><span>  └── specs/… （存放规范 delta）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>验证 &amp; 审查</strong></p><ul><li>在终端里执行 <code>openspec list</code>：确认提案文件夹已经生成。</li><li>执行 <code>openspec validate add-profile-filters</code>：校验 proposal 的格式、结构是否正确。</li><li>执行 <code>openspec show add-profile-filters</code>：查看提案内容、任务、规范变更（delta）。</li></ul></li><li><p><strong>细化规范</strong><br> 你可以让 AI 修改提案 / 规范，例如：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>你：请为角色和团队过滤器加入验收标准（acceptance criteria）  </span></span>
<span class="line"><span>AI：好的，我会在 spec delta 里增加这些场景，并更新 tasks.md</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>实施变更</strong><br> 当提案和规范确认无误后，你对 AI 说：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>我们开始实现该变更（如果支持 Slash Command：\`/openspec:apply add-profile-filters\`）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>AI 会根据 <code>tasks.md</code> 中的任务一步步写代码，并在完成每个任务后打勾（✓）。</p></li><li><p><strong>归档变更</strong><br> 实现完成后，你让 AI 归档这个变更：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>你：请归档 “add-profile-filters” 变更  </span></span>
<span class="line"><span>（Slash Command 形式：\`/openspec:archive add-profile-filters\`）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>AI 会执行类似 <code>openspec archive add-profile-filters --yes</code>，将 <code>changes/add-profile-filters</code> 中的规范 delta 合并回 <code>openspec/specs/</code>，并标记为完成。</p></li></ol><hr><h2 id="常用命令参考" tabindex="-1"><a class="header-anchor" href="#常用命令参考"><span>常用命令参考</span></a></h2><ul><li><p><code>openspec list</code><br> 列出当前所有活跃的变更（change folders）。</p></li><li><p><code>openspec view</code><br> 打开一个交互式面板，查看规范和变更。</p></li><li><p><code>openspec show &lt;change&gt;</code><br> 显示某个具体变更（提案、任务、规范差异）。</p></li><li><p><code>openspec validate &lt;change&gt;</code><br> 校验某个变更的规范结构是否符合格式要求。</p></li><li><p><code>openspec archive &lt;change&gt; [--yes|-y]</code><br> 归档一个已完成的变更，并将其规范合并回主规范。加 <code>--yes</code> 可以跳过确认。</p></li></ul><hr><h2 id="示例-ai-如何创建-openspec-文件" tabindex="-1"><a class="header-anchor" href="#示例-ai-如何创建-openspec-文件"><span>示例（AI 如何创建 OpenSpec 文件）</span></a></h2><p>假设你对 AI 说：“我要加双因素认证（2FA）”：</p><ul><li>AI 会创建：</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>openspec/</span></span>
<span class="line"><span>  ├── specs/</span></span>
<span class="line"><span>  │   └── auth/</span></span>
<span class="line"><span>  │       └── spec.md           # 当前 auth 模块的规范</span></span>
<span class="line"><span>  └── changes/</span></span>
<span class="line"><span>      └── add-2fa/</span></span>
<span class="line"><span>          ├── proposal.md       # 为什么要加 2FA、业务背景</span></span>
<span class="line"><span>          ├── tasks.md          # 实现任务清单</span></span>
<span class="line"><span>          ├── design.md         # 技术设计（可选）</span></span>
<span class="line"><span>          └── specs/</span></span>
<span class="line"><span>              └── auth/</span></span>
<span class="line"><span>                  └── spec.md   # 规范 delta（2FA 相关新增内容）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>openspec/specs/auth/spec.md</code>（主规范）大致可能长这样：</p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"># 认证（Auth） 模块规范</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## 目的  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">处理用户认证和会话管理。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## 需求  </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">### 需求：用户认证（User Authentication）  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">系统 </span><span style="--shiki-light:#986801;--shiki-light-font-weight:bold;--shiki-dark:#D19A66;--shiki-dark-font-weight:inherit;">**必须**</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">（SHALL）在用户成功登录后发一个 JWT。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">#### 场景：凭证合法  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 当用户提交合法凭证  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 那么系统返回一个 JWT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在 delta 里（<code>changes/add-2fa/specs/auth/spec.md</code>）：</p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"># Auth 模块 Delta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## 新增需求（ADDED Requirements）  </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">### 需求：双因素认证（Two-Factor Authentication）  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">系统 </span><span style="--shiki-light:#986801;--shiki-light-font-weight:bold;--shiki-dark:#D19A66;--shiki-dark-font-weight:inherit;">**必须**</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">（MUST）在登录时要求第二因素。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">#### 场景：需要 OTP  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 当用户提交合法凭证  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 那么系统要求一个 OTP 验证挑战</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>tasks.md</code> 大致任务清单可能是：</p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## 1. 数据库准备  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ ] 增加用户表的 OTP secret 字段  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ ] 新建 OTP 验证日志表  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## 2. 后端实现  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ ] 创建 OTP 生成接口  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ ] 修改登录逻辑以要求 OTP  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ ] 新建 OTP 验证的接口  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">## 3. 前端更新  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ ] 新建 OTP 输入组件  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [ ] 修改登录界面流程，加入 OTP 步骤</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>AI 会完全自动生成这些文件（你基本不用自己写），前提是你告诉 AI 你的意图。</p><hr><h2 id="关于-openspec-文件格式" tabindex="-1"><a class="header-anchor" href="#关于-openspec-文件格式"><span>关于 OpenSpec 文件格式</span></a></h2><ul><li><p><strong>Delta（差异）格式</strong>：用来展示规范如何变化。</p><ul><li><code>## ADDED Requirements</code> — 新增需求</li><li><code>## MODIFIED Requirements</code> — 已有需求被修改（完整写出新的版本）</li><li><code>## REMOVED Requirements</code> — 废弃的功能</li></ul></li><li><p>规范头结构：</p><ul><li><code>### Requirement: &lt;名字&gt;</code>：用这个格式来写每条需求</li><li>每个需求至少应该有一个 <code>#### Scenario:</code>（场景）块</li><li>需求文本里建议使用 <code>SHALL</code> / <code>MUST</code> 这种词语来强调规范要求</li></ul></li></ul><hr><h2 id="openspec-与其他工具对比-深入" tabindex="-1"><a class="header-anchor" href="#openspec-与其他工具对比-深入"><span>OpenSpec 与其他工具对比（深入）</span></a></h2><ul><li><strong>vs spec-kit</strong>：OpenSpec 的双文件夹模型（<code>specs/</code> + <code>changes/</code>）使得「当前真实规范」和「提案中的规范变更」分离。这在你修改老功能、或者一次变更影响多个模块时非常有用。spec-kit 更适合「全新功能从 0 到 1」。</li><li><strong>vs Kiro.dev</strong>：OpenSpec 把一个变更相关的所有内容 — 提案、任务、规范 delta — 都集中在一个变更文件夹里（<code>openspec/changes/feature-name/</code>），便于追踪。Kiro 的做法可能把变更分散到多个规范目录里，更难集中查看。</li></ul><hr><h2 id="团队采用建议-team-adoption" tabindex="-1"><a class="header-anchor" href="#团队采用建议-team-adoption"><span>团队采用建议（Team Adoption）</span></a></h2><ol><li>在你的 repo 里运行 <code>openspec init</code> 初始化。</li><li><strong>从新功能开始</strong>：建议先对你之后要做的新 feature 用 OpenSpec 建 proposal / 变更。</li><li><strong>增量构建规范</strong>：每个变更做完后，都把它归档（archive），然后把规范（delta）合并到主规范里，这样你的 <code>openspec/specs/</code> 会越来越完整。</li><li><strong>兼容各种工具</strong>：不同人可以用不同 AI 编码助手（Claude Code、Cursor、CodeBuddy 等），大家共享统一规范。</li></ol><blockquote><p>小贴士：当有人切换 AI 工具时，运行 <code>openspec update</code>，可以更新 AI 指令和 slash-command 的配置，让新工具也能正确工作。</p></blockquote><hr><h2 id="更新-openspec-的方式" tabindex="-1"><a class="header-anchor" href="#更新-openspec-的方式"><span>更新 OpenSpec 的方式</span></a></h2><ol><li><p><strong>升级 CLI</strong></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> @fission-ai/openspec@latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>刷新 AI 指令</strong><br> 在你的项目里运行：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">openspec</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这样可以重新生成 <code>AGENTS.md</code>，并确保你选择的 AI 工具对应最新的 Slash 命令。</p></li></ol><hr><h2 id="参与贡献-contributing" tabindex="-1"><a class="header-anchor" href="#参与贡献-contributing"><span>参与贡献（Contributing）</span></a></h2><ul><li>安装依赖：<code>pnpm install</code></li><li>构建项目：<code>pnpm run build</code></li><li>运行测试：<code>pnpm test</code></li><li>本地开发 CLI：<code>pnpm run dev</code> 或 <code>pnpm run dev:cli</code></li><li>提交规范：使用 Conventional Commits 风格（例如 <code>feat(cli): add new command</code>）</li></ul><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1>`,63)])])}const t=s(p,[["render",l]]),r=JSON.parse('{"path":"/posts/sdd/2025-11-20-ai-sdd-03-opensepc-intro.html","title":"AI SDD 开发规范-03-openspec 介绍","lang":"zh-CN","frontmatter":{"title":"AI SDD 开发规范-03-openspec 介绍","date":"2025-11-20T00:00:00.000Z","categories":["AI"],"tags":["ai","sdd","sh"],"published":true,"description":"OpenSpec OpenSpec 让人类和 AI 编码助手之间达成「规格驱动开发」（spec-driven development），确保在写任何代码之前，大家都同意要构建什么。不需要 API 密钥。 为什么要用 OpenSpec？ 虽然 AI 编码助手很强大，但当需求散落在聊天记录里时，它们极不稳定。 OpenSpec 引入一种轻量级的规格工作流程...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AI SDD 开发规范-03-openspec 介绍\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-11-20T00:00:00.000Z\\",\\"dateModified\\":\\"2025-12-27T05:15:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://houbb.github.io/awesome-ai-coding/posts/sdd/2025-11-20-ai-sdd-03-opensepc-intro.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"AI SDD 开发规范-03-openspec 介绍"}],["meta",{"property":"og:description","content":"OpenSpec OpenSpec 让人类和 AI 编码助手之间达成「规格驱动开发」（spec-driven development），确保在写任何代码之前，大家都同意要构建什么。不需要 API 密钥。 为什么要用 OpenSpec？ 虽然 AI 编码助手很强大，但当需求散落在聊天记录里时，它们极不稳定。 OpenSpec 引入一种轻量级的规格工作流程..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-27T05:15:15.000Z"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:tag","content":"sdd"}],["meta",{"property":"article:tag","content":"ai"}],["meta",{"property":"article:published_time","content":"2025-11-20T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-27T05:15:15.000Z"}]]},"git":{"createdTime":1766806441000,"updatedTime":1766812515000,"contributors":[{"name":"bbhou","username":"bbhou","email":"1557740299@qq.com","commits":4,"url":"https://github.com/bbhou"}]},"readingTime":{"minutes":8.87,"words":2661},"filePathRelative":"posts/sdd/2025-11-20-ai-sdd-03-opensepc-intro.md","excerpt":"\\n<p>OpenSpec 让人类和 AI 编码助手之间达成「规格驱动开发」（spec-driven development），确保在写任何代码之前，大家都同意要构建什么。<strong>不需要 API 密钥</strong>。</p>\\n<hr>\\n<h2>为什么要用 OpenSpec？</h2>\\n<ul>\\n<li>\\n<p>虽然 AI 编码助手很强大，但当需求散落在聊天记录里时，它们极不稳定。</p>\\n</li>\\n<li>\\n<p>OpenSpec 引入一种轻量级的规格工作流程，把意图锁定下来，然后再去实现。这样可以得到 <strong>确定性（deterministic）</strong>、<strong>可复审（reviewable）</strong> 的输出。</p>\\n</li>\\n<li>\\n<p>关键收益包括：</p>\\n<ol>\\n<li>人类和 AI 的参与者在工作开始之前就对规格达成一致。</li>\\n<li>通过结构化的变更文件夹（proposal 提案、tasks 任务、spec 更新），让范围明确且可审计。</li>\\n<li>对「正在提议」「正在进行」「已归档」的变更，都有共享可见性。</li>\\n<li>与你已经使用的 AI 工具兼容 — 在支持的工具里可以用自定义斜杠命令（slash commands），在其他地方则可以通过上下文规则（context rules）工作。</li>\\n</ol>\\n</li>\\n</ul>","autoDesc":true}');export{t as comp,r as data};
