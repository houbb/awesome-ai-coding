import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a as e,o as n}from"./app-BCq4GIDA.js";const t={};function l(r,s){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="ai-编码执行期标准-prompt-execution-time-prompt-template" tabindex="-1"><a class="header-anchor" href="#ai-编码执行期标准-prompt-execution-time-prompt-template"><span>AI 编码执行期标准 Prompt（Execution-Time Prompt Template）</span></a></h1><p>这是<strong>AI 编码体系里最后、也是最容易被低估的一环</strong>。</p><p>你前面已经把 <strong>事前（Snapshot）+ 事中（Execution Prompt）<strong>做到了工程级水准，如果</strong>事后没有 Gate</strong>，整体仍然是“不闭环的”。</p><blockquote><p><strong>结论先行：<br> AI 编码后的校验，必须从“结果检查”升级为“多层 Gate 驱动的发布判定系统”。</strong></p></blockquote><p>下面我会给你一套<strong>完整、可落地的事后检验 + Gate 限制体系</strong>，而且是<strong>专门为 AI 编码设计的</strong>，不是人类 CI 的简单复用。</p><hr><h1 id="一、核心原则-非常重要" tabindex="-1"><a class="header-anchor" href="#一、核心原则-非常重要"><span>一、核心原则（非常重要）</span></a></h1><h3 id="传统-ci-的假设是" tabindex="-1"><a class="header-anchor" href="#传统-ci-的假设是"><span>传统 CI 的假设是：</span></a></h3><blockquote><p>代码是人写的，意图可信，只验证结果</p></blockquote><h3 id="ai-编码的现实是" tabindex="-1"><a class="header-anchor" href="#ai-编码的现实是"><span>AI 编码的现实是：</span></a></h3><blockquote><p>代码是“机器推导”的，<strong>意图不完全可信</strong>，必须同时验证：</p></blockquote><ul><li><strong>结果是否正确</strong></li><li><strong>修改是否越权</strong></li><li><strong>风险是否被低估</strong></li></ul><p>所以 Gate 不是一层，而是<strong>分层、分权、可否决的</strong>。</p><hr><h1 id="二、ai-编码后的五层-gate-体系-推荐" tabindex="-1"><a class="header-anchor" href="#二、ai-编码后的五层-gate-体系-推荐"><span>二、AI 编码后的五层 Gate 体系（推荐）</span></a></h1><p>整体结构如下：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>AI Commit</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Gate 0：变更合法性 Gate（AI 特有）</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Gate 1：编译 / 静态校验 Gate</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Gate 2：单元 / 契约 Gate</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Gate 3：行为 / 回归 / QA Gate</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Gate 4：性能 / 稳定性 / 风险 Gate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>任何一层失败，直接阻断，不允许“带病进入下一层”。</strong></p><hr><h1 id="三、gate-0-ai-变更合法性-gate-极其关键" tabindex="-1"><a class="header-anchor" href="#三、gate-0-ai-变更合法性-gate-极其关键"><span>三、Gate 0：AI 变更合法性 Gate（极其关键）</span></a></h1><blockquote><p><strong>这是人类 CI 几乎没有的，但 AI 必须有</strong></p></blockquote><h3 id="目标" tabindex="-1"><a class="header-anchor" href="#目标"><span>目标</span></a></h3><p>验证：<strong>AI 是否遵守了 Execution Contract</strong></p><h3 id="核心检查项" tabindex="-1"><a class="header-anchor" href="#核心检查项"><span>核心检查项</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 是否只修改了 Snapshot 授权范围内的文件？</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 是否触碰了禁止目录 / 高风险模块？</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 是否存在“未声明意图的修改”？</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 是否出现与 PLAN 不一致的改动？</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实现方式-工程可落地" tabindex="-1"><a class="header-anchor" href="#实现方式-工程可落地"><span>实现方式（工程可落地）</span></a></h3><ul><li><p>Git Diff + Snapshot 白名单路径</p></li><li><p>AST / Diff 规则检测：</p><ul><li>新增 public API？</li><li>方法职责扩大？</li></ul></li><li><p>强制要求：</p><ul><li>AI Step → Commit Message → Intent 对齐</li></ul></li></ul><blockquote><p><strong>Gate 0 不通过 = 不看代码质量，直接打回</strong></p></blockquote><hr><h1 id="四、gate-1-编译-静态校验-gate-硬门槛" tabindex="-1"><a class="header-anchor" href="#四、gate-1-编译-静态校验-gate-硬门槛"><span>四、Gate 1：编译 + 静态校验 Gate（硬门槛）</span></a></h1><h3 id="目标-1" tabindex="-1"><a class="header-anchor" href="#目标-1"><span>目标</span></a></h3><p>验证：<strong>代码在工程层面是否“站得住”</strong></p><h3 id="最小必选项" tabindex="-1"><a class="header-anchor" href="#最小必选项"><span>最小必选项</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 编译 / 构建通过</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Lint / 格式校验</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 静态分析（空指针、资源泄漏、并发）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关键建议-ai-场景" tabindex="-1"><a class="header-anchor" href="#关键建议-ai-场景"><span>关键建议（AI 场景）</span></a></h3><ul><li><strong>Warnings 视为 Errors</strong>（至少对 AI Commit）</li><li>禁止 AI 引入新的 Warning Baseline</li></ul><hr><h1 id="五、gate-2-单元-契约-gate-语义正确性" tabindex="-1"><a class="header-anchor" href="#五、gate-2-单元-契约-gate-语义正确性"><span>五、Gate 2：单元 / 契约 Gate（语义正确性）</span></a></h1><blockquote><p><strong>这是防止“编译通过但行为错误”的第一道防线</strong></p></blockquote><h3 id="必须覆盖的三类测试" tabindex="-1"><a class="header-anchor" href="#必须覆盖的三类测试"><span>必须覆盖的三类测试</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">1.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 新增 / 修改逻辑对应的单元测试</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">2.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 关键分支 / 异常路径</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">3.</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 对外接口的契约测试（若有）</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ai-特有规则" tabindex="-1"><a class="header-anchor" href="#ai-特有规则"><span>AI 特有规则</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AI 修改了逻辑 → 必须同步更新或新增测试</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 未覆盖的分支 → 明确声明原因</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>不允许“我觉得不用测”</strong></p></blockquote><hr><h1 id="六、gate-3-行为回归-qa-gate-系统层面" tabindex="-1"><a class="header-anchor" href="#六、gate-3-行为回归-qa-gate-系统层面"><span>六、Gate 3：行为回归 / QA Gate（系统层面）</span></a></h1><h3 id="目标-2" tabindex="-1"><a class="header-anchor" href="#目标-2"><span>目标</span></a></h3><p>验证：<strong>系统行为是否与“设计意图 + 历史行为”一致</strong></p><h3 id="推荐手段" tabindex="-1"><a class="header-anchor" href="#推荐手段"><span>推荐手段</span></a></h3><ul><li>回归测试</li><li>核心业务用例自动化</li><li>Mock 下游 / 回放历史流量（如有）</li></ul><h3 id="ai-风险点重点关注" tabindex="-1"><a class="header-anchor" href="#ai-风险点重点关注"><span>AI 风险点重点关注</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 边界条件变化</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 默认值变化</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 异常处理路径变化</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h1 id="七、gate-4-性能-稳定性-风险-gate-发布前" tabindex="-1"><a class="header-anchor" href="#七、gate-4-性能-稳定性-风险-gate-发布前"><span>七、Gate 4：性能 / 稳定性 / 风险 Gate（发布前）</span></a></h1><blockquote><p><strong>这是防止“功能正确但线上事故”的最后一道门</strong></p></blockquote><h3 id="核心检查维度" tabindex="-1"><a class="header-anchor" href="#核心检查维度"><span>核心检查维度</span></a></h3><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">性能：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 延迟是否退化</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> QPS / 资源消耗是否异常</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">稳定性：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 重试 / 超时 / 熔断行为是否变化</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">风险：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 是否引入不可回滚改动</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 是否触碰 Failure Budget 红线</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="非强制但强烈建议" tabindex="-1"><a class="header-anchor" href="#非强制但强烈建议"><span>非强制但强烈建议</span></a></h3><ul><li>与历史版本做 <strong>对比基线</strong></li><li>不看绝对值，看 <strong>变化趋势</strong></li></ul><hr><h1 id="八、gate-的裁决权设计-非常重要" tabindex="-1"><a class="header-anchor" href="#八、gate-的裁决权设计-非常重要"><span>八、Gate 的裁决权设计（非常重要）</span></a></h1><h3 id="建议的裁决权模型" tabindex="-1"><a class="header-anchor" href="#建议的裁决权模型"><span>建议的裁决权模型</span></a></h3><table><thead><tr><th>Gate</th><th>裁决权</th></tr></thead><tbody><tr><td>Gate 0</td><td>规则自动否决</td></tr><tr><td>Gate 1</td><td>系统自动</td></tr><tr><td>Gate 2</td><td>自动 + 人</td></tr><tr><td>Gate 3</td><td>人为主</td></tr><tr><td>Gate 4</td><td>技术负责人</td></tr></tbody></table><blockquote><p><strong>越靠前越自动，越靠后越需要人</strong></p></blockquote><hr><h1 id="九、ai-编码的-发布资格判定公式" tabindex="-1"><a class="header-anchor" href="#九、ai-编码的-发布资格判定公式"><span>九、AI 编码的“发布资格判定公式”</span></a></h1><p>你可以明确写成一句话规则：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>AI 代码 ≠ 测试通过即可发布</span></span>
<span class="line"><span>AI 代码 = 合法 + 正确 + 可控 + 风险可接受</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h1 id="十、给你一个高度关键的判断" tabindex="-1"><a class="header-anchor" href="#十、给你一个高度关键的判断"><span>十、给你一个高度关键的判断</span></a></h1><blockquote><p><strong>AI 编码的核心不是“写得对不对”，<br> 而是“有没有被一套制度驯化”。</strong></p></blockquote><p>你现在已经完成了：</p><ul><li>事前：认知冻结</li><li>事中：执行约束</li><li>事后：多层 Gate</li></ul><p>这三点合在一起，已经是：</p><blockquote><p><strong>AI 软件工程治理体系（而不是工具使用技巧）</strong></p></blockquote><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1>`,76)])])}const d=a(t,[["render",l]]),o=JSON.parse('{"path":"/posts/sdd/2025-11-20-ai-sdd-24-after-impl-how.html","title":"AI SDD 开发规范-24-完整、可落地的事后检验 + Gate 限制体系","lang":"zh-CN","frontmatter":{"title":"AI SDD 开发规范-24-完整、可落地的事后检验 + Gate 限制体系","categories":["AI"],"tags":["ai","sdd","sh"],"published":true,"description":"AI 编码执行期标准 Prompt（Execution-Time Prompt Template） 这是AI 编码体系里最后、也是最容易被低估的一环。 你前面已经把 事前（Snapshot）+ 事中（Execution Prompt）做到了工程级水准，如果事后没有 Gate，整体仍然是“不闭环的”。 结论先行： AI 编码后的校验，必须从“结果检查”升...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AI SDD 开发规范-24-完整、可落地的事后检验 + Gate 限制体系\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-27T07:02:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://houbb.github.io/awesome-ai-coding/posts/sdd/2025-11-20-ai-sdd-24-after-impl-how.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"AI SDD 开发规范-24-完整、可落地的事后检验 + Gate 限制体系"}],["meta",{"property":"og:description","content":"AI 编码执行期标准 Prompt（Execution-Time Prompt Template） 这是AI 编码体系里最后、也是最容易被低估的一环。 你前面已经把 事前（Snapshot）+ 事中（Execution Prompt）做到了工程级水准，如果事后没有 Gate，整体仍然是“不闭环的”。 结论先行： AI 编码后的校验，必须从“结果检查”升..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-27T07:02:53.000Z"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:tag","content":"sdd"}],["meta",{"property":"article:tag","content":"ai"}],["meta",{"property":"article:modified_time","content":"2025-12-27T07:02:53.000Z"}]]},"git":{"createdTime":1766818973000,"updatedTime":1766818973000,"contributors":[{"name":"bbhou","username":"bbhou","email":"1557740299@qq.com","commits":1,"url":"https://github.com/bbhou"}]},"readingTime":{"minutes":3.9,"words":1169},"filePathRelative":"posts/sdd/2025-11-20-ai-sdd-24-after-impl-how.md","excerpt":"\\n<p>这是<strong>AI 编码体系里最后、也是最容易被低估的一环</strong>。</p>\\n<p>你前面已经把 <strong>事前（Snapshot）+ 事中（Execution Prompt）<strong>做到了工程级水准，如果</strong>事后没有 Gate</strong>，整体仍然是“不闭环的”。</p>\\n<blockquote>\\n<p><strong>结论先行：<br>\\nAI 编码后的校验，必须从“结果检查”升级为“多层 Gate 驱动的发布判定系统”。</strong></p>\\n</blockquote>\\n<p>下面我会给你一套<strong>完整、可落地的事后检验 + Gate 限制体系</strong>，而且是<strong>专门为 AI 编码设计的</strong>，不是人类 CI 的简单复用。</p>","autoDesc":true}');export{d as comp,o as data};
