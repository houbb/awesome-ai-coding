import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as i,o as e}from"./app-eR0lnyjc.js";const p={};function l(d,s){return e(),a("div",null,[...s[0]||(s[0]=[i(`<h1 id="repo-awareness-自动校验-prompt" tabindex="-1"><a class="header-anchor" href="#repo-awareness-自动校验-prompt"><span>Repo Awareness 自动校验 Prompt</span></a></h1><p>下面给你一份<strong>可直接复制使用的《Repo Awareness 自动校验 Prompt》</strong>。<br> 它的定位是：</p><blockquote><p><strong>在 AI 改任何一行代码之前，先强制做一次“仓库理解自检”，不通过就禁止执行。</strong></p></blockquote><p>这不是“辅助提示”，而是<strong>门禁级 Prompt</strong>，适合：</p><ul><li>Gemini CLI / Claude Code</li><li>自研 Agent</li><li>CI 中的 AI 执行前校验</li><li>你现在的 DESIGN / TACIT / CHANGE_RULES 体系</li></ul><hr><h1 id="repo-awareness-自动校验-prompt-gate-version" tabindex="-1"><a class="header-anchor" href="#repo-awareness-自动校验-prompt-gate-version"><span>Repo Awareness 自动校验 Prompt（Gate Version）</span></a></h1><h2 id="📌-使用方式" tabindex="-1"><a class="header-anchor" href="#📌-使用方式"><span>📌 使用方式</span></a></h2><ul><li><strong>作为所有改代码 Prompt 的前置</strong></li><li><strong>必须完整执行</strong></li><li><strong>未通过 = 禁止修改</strong></li></ul><hr><h2 id="🧠-prompt-正文-可直接用" tabindex="-1"><a class="header-anchor" href="#🧠-prompt-正文-可直接用"><span>🧠 Prompt 正文（可直接用）</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>你现在的角色不是代码生成器，而是【仓库理解审计器】。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>在开始任何代码修改之前，你必须完成以下 Repository Awareness 校验。</span></span>
<span class="line"><span>如果任一校验项无法明确回答，或你对仓库存在不确定理解，请立即中止执行并提出澄清问题。</span></span>
<span class="line"><span>禁止在理解不完整的情况下修改代码。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span>【第一阶段：仓库整体理解校验】</span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请基于当前仓库，回答以下问题：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>1. 用不超过 150 字说明：</span></span>
<span class="line"><span>   - 这个仓库解决什么问题？</span></span>
<span class="line"><span>   - 当前最重要的工程目标是什么？</span></span>
<span class="line"><span>   - 明确不追求的目标有哪些？</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. 这个仓库是否属于以下哪一类：</span></span>
<span class="line"><span>   - 探索期 / PoC</span></span>
<span class="line"><span>   - 功能演进期</span></span>
<span class="line"><span>   - 历史系统维护期</span></span>
<span class="line"><span>   （必须选择其一，并说明依据）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span>【第二阶段：结构与角色校验】</span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. 本次拟修改的文件所在目录，在仓库中的职责是什么？</span></span>
<span class="line"><span>   - 它属于：接口层 / 业务层 / 基础设施 / 领域模型 / Legacy</span></span>
<span class="line"><span>   - 该层级明确禁止做哪些事情？</span></span>
<span class="line"><span></span></span>
<span class="line"><span>4. 本次修改是否触及以下任一情况：</span></span>
<span class="line"><span>   - 冻结目录（Frozen Zone）</span></span>
<span class="line"><span>   - Legacy 模块</span></span>
<span class="line"><span>   - 明确“不建议修改”的代码</span></span>
<span class="line"><span></span></span>
<span class="line"><span>如果是，请说明：</span></span>
<span class="line"><span>- 为什么仍然需要修改</span></span>
<span class="line"><span>- 修改范围是否被严格限制</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span>【第三阶段：隐性知识与历史约束校验】</span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>5. 本次修改是否涉及以下高风险领域：</span></span>
<span class="line"><span>   - 接口语义</span></span>
<span class="line"><span>   - 数据结构或字段含义</span></span>
<span class="line"><span>   - 并发 / 缓存 / 重试 / 超时</span></span>
<span class="line"><span>   - 事务边界或副作用</span></span>
<span class="line"><span></span></span>
<span class="line"><span>如涉及，请明确指出：</span></span>
<span class="line"><span>- 相关的隐性契约</span></span>
<span class="line"><span>- 已知历史事故或风险提示</span></span>
<span class="line"><span></span></span>
<span class="line"><span>6. 请明确说明：</span></span>
<span class="line"><span>   - 本次修改是否违反 TACIT_KNOWLEDGE.md 中的任何约束？</span></span>
<span class="line"><span>   - 如果不确定，必须视为【违反】并中止执行</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span>【第四阶段：设计覆盖与歧义校验】</span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>7. DESIGN.md 是否完整覆盖以下内容：</span></span>
<span class="line"><span>   - 修改目标（唯一且明确）</span></span>
<span class="line"><span>   - 输入 / 输出契约</span></span>
<span class="line"><span>   - 核心流程（逐步、无跳跃）</span></span>
<span class="line"><span>   - 异常与失败处理</span></span>
<span class="line"><span>   - 状态变化与不变量</span></span>
<span class="line"><span></span></span>
<span class="line"><span>如果 DESIGN 中存在以下任一情况：</span></span>
<span class="line"><span>- “等 / 相关处理 / 视情况而定”</span></span>
<span class="line"><span>- 行为或边界未显式定义</span></span>
<span class="line"><span></span></span>
<span class="line"><span>则视为【设计不充分】，禁止修改。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span>【第五阶段：影响面与可控性校验】</span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>8. 请列出本次修改的影响范围：</span></span>
<span class="line"><span>   - 直接影响模块</span></span>
<span class="line"><span>   - 间接影响模块</span></span>
<span class="line"><span>   - 不确定影响点（必须如实列出）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>9. 本次修改是否可能造成以下不可逆后果：</span></span>
<span class="line"><span>   - 数据不可回滚</span></span>
<span class="line"><span>   - 接口兼容性破坏</span></span>
<span class="line"><span>   - 线上行为不可预测</span></span>
<span class="line"><span></span></span>
<span class="line"><span>如存在任何不可逆风险，禁止直接修改。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span>【第六阶段：最终决策（必须明确给出）】</span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请在以下三项中选择唯一结论，并说明理由：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- ✅ 通过校验，允许在 DESIGN.md 明确范围内修改</span></span>
<span class="line"><span>- ⚠️ 理解部分不足，需要澄清后再决定</span></span>
<span class="line"><span>- ❌ 仓库理解不足或风险过高，拒绝修改</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span>【强制规则】</span></span>
<span class="line"><span>--------------------------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- 不允许“边改边理解”</span></span>
<span class="line"><span>- 不允许假设“合理即可”</span></span>
<span class="line"><span>- 不允许为了完成任务而忽略仓库约束</span></span>
<span class="line"><span>- 若无法确认安全性，拒绝执行是正确行为</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="🔧-使用建议-非常重要" tabindex="-1"><a class="header-anchor" href="#🔧-使用建议-非常重要"><span>🔧 使用建议（非常重要）</span></a></h2><h3 id="_1️⃣-把它当成-前置-gate-而不是对话一部分" tabindex="-1"><a class="header-anchor" href="#_1️⃣-把它当成-前置-gate-而不是对话一部分"><span>1️⃣ 把它当成“前置 Gate”，而不是对话一部分</span></a></h3><p>正确流程：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>Repo Awareness 校验 Prompt</span></span>
<span class="line"><span>   ↓（通过）</span></span>
<span class="line"><span>DESIGN 执行 Prompt</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>风险扫描 Checklist</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>生成代码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_2️⃣-校验输出必须可审计" tabindex="-1"><a class="header-anchor" href="#_2️⃣-校验输出必须可审计"><span>2️⃣ 校验输出必须可审计</span></a></h3><p>建议要求 AI 输出结构化结果，例如：</p><div class="language-md line-numbers-mode" data-highlighter="shiki" data-ext="md" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-md"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">### Repo Awareness 校验结果</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 仓库阶段判断：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 修改文件角色：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 触及冻结区：是 / 否</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 隐性契约影响：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 设计覆盖度评估：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不确定点列表：</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 最终决策：</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h3 id="_3️⃣-这是-防-ai-犯错-也是-防人偷懒" tabindex="-1"><a class="header-anchor" href="#_3️⃣-这是-防-ai-犯错-也是-防人偷懒"><span>3️⃣ 这是“防 AI 犯错”，也是“防人偷懒”</span></a></h3><p>一个非常现实的结论是：</p><blockquote><p><strong>这个 Prompt 既是在约束 AI，也是在约束需求方和设计方。</strong></p></blockquote><p>如果设计不清晰、目标不单一、风险没人兜底：</p><ul><li>AI 会被迫拒绝</li><li>问题会提前暴露</li></ul><hr><h2 id="🧱-工程级总结" tabindex="-1"><a class="header-anchor" href="#🧱-工程级总结"><span>🧱 工程级总结</span></a></h2><p>如果用一句话总结这套 Prompt 的价值：</p><blockquote><p><strong>它不是让 AI 更懂代码，而是让 AI 不敢在“不懂仓库”的情况下动代码。</strong></p></blockquote><p>这正是你当前体系里<strong>最关键、也是最稀缺的一环</strong>。</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1>`,33)])])}const t=n(p,[["render",l]]),v=JSON.parse('{"path":"/posts/sdd/2025-11-20-ai-sdd-15-repo-aware-gate.html","title":"AI SDD 开发规范-15-Repo Awareness 自动校验 Prompt","lang":"zh-CN","frontmatter":{"title":"AI SDD 开发规范-15-Repo Awareness 自动校验 Prompt","categories":["AI"],"tags":["ai","sdd","sh"],"published":true,"description":"Repo Awareness 自动校验 Prompt 下面给你一份可直接复制使用的《Repo Awareness 自动校验 Prompt》。 它的定位是： 在 AI 改任何一行代码之前，先强制做一次“仓库理解自检”，不通过就禁止执行。 这不是“辅助提示”，而是门禁级 Prompt，适合： Gemini CLI / Claude Code 自研 Agen...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AI SDD 开发规范-15-Repo Awareness 自动校验 Prompt\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-27T07:02:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"老马啸西风\\",\\"url\\":\\"https://houbb.github.io\\"}]}"],["meta",{"property":"og:url","content":"https://houbb.github.io/awesome-ai-coding/posts/sdd/2025-11-20-ai-sdd-15-repo-aware-gate.html"}],["meta",{"property":"og:site_name","content":"老马啸西风"}],["meta",{"property":"og:title","content":"AI SDD 开发规范-15-Repo Awareness 自动校验 Prompt"}],["meta",{"property":"og:description","content":"Repo Awareness 自动校验 Prompt 下面给你一份可直接复制使用的《Repo Awareness 自动校验 Prompt》。 它的定位是： 在 AI 改任何一行代码之前，先强制做一次“仓库理解自检”，不通过就禁止执行。 这不是“辅助提示”，而是门禁级 Prompt，适合： Gemini CLI / Claude Code 自研 Agen..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-27T07:02:53.000Z"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:tag","content":"sdd"}],["meta",{"property":"article:tag","content":"ai"}],["meta",{"property":"article:modified_time","content":"2025-12-27T07:02:53.000Z"}]]},"git":{"createdTime":1766818973000,"updatedTime":1766818973000,"contributors":[{"name":"bbhou","username":"bbhou","email":"1557740299@qq.com","commits":1,"url":"https://github.com/bbhou"}]},"readingTime":{"minutes":4.17,"words":1251},"filePathRelative":"posts/sdd/2025-11-20-ai-sdd-15-repo-aware-gate.md","excerpt":"\\n<p>下面给你一份<strong>可直接复制使用的《Repo Awareness 自动校验 Prompt》</strong>。<br>\\n它的定位是：</p>\\n<blockquote>\\n<p><strong>在 AI 改任何一行代码之前，先强制做一次“仓库理解自检”，不通过就禁止执行。</strong></p>\\n</blockquote>\\n<p>这不是“辅助提示”，而是<strong>门禁级 Prompt</strong>，适合：</p>\\n<ul>\\n<li>Gemini CLI / Claude Code</li>\\n<li>自研 Agent</li>\\n<li>CI 中的 AI 执行前校验</li>\\n<li>你现在的 DESIGN / TACIT / CHANGE_RULES 体系</li>\\n</ul>","autoDesc":true}');export{t as comp,v as data};
